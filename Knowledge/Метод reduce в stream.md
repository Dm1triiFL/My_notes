---
tags:
  - Java
---

# Метод `reduce` в Stream API

## Что делает?

`reduce` — это **терминальная операция**, которая последовательно объединяет все элементы потока в одно итоговое значение, применяя к ним заданную функцию-агрегатор.

---

## Основные формы метода

```java
Optional<T> reduce(BinaryOperator<T> accumulator)
```

```java
T reduce(T identity, BinaryOperator<T> accumulator)
```

---

## Разбор

| Параметр | Описание |
| --- | --- |
| `identity` | Начальное значение (часто используется для типа чисел 0, 1 и т.п.) |
| `accumulator` | Функция-операция, объединяющая два элемента в один |

---

## Что происходит внутри?

- **Образует цепочку**: берутся элементы потока.
- **Метод** применяет `accumulator` к первому элементу и `identity` (если есть) или к двум элементам по очереди.
- **В цепочке** результат каждого вызова передается в следующий вызов.
- В конце — получается итоговое объединённое значение.

---

## Примеры использования

### 1. Сумма элементов

```java
int sum = list.stream()
              .reduce(0, Integer::sum);
```

Здесь `0` — начальное значение, а `Integer::sum` — операция сложения.

---

### 2. Произведение элементов

```java
int product = list.stream()
                  .reduce(1, (a, b) -> a * b);
```

Здесь `1` — стартовое значение, а операция — умножение.

---

### 3. Без начального значения (возвращает `Optional`)

```java
Optional<Integer> max = list.stream()
                            .reduce(Integer::max);
```

Если список пустой, `Optional` будет пустым.

---

## Когда использовать `reduce`?

- Когда нужно **агрегировать все элементы** в одно значение: сумма, произведение, максимум, минимум, конкатенация строк и т.п.
- Когда нужно реализовать **свой собственный механизм агрегации**.

---

## Итог

`reduce` — мощная операция для свёртывания данных, полезная для любых операций агрегации, особенно когда стандартных методов (например, `sum`, `max`, `min`) недостаточно.

---

