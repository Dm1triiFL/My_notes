---
tags:
  - Spring
---
## **Аннотация `@Transactional` в Spring**

Аннотация `@Transactional` в Spring используется для управления транзакциями в приложениях, основанных на Spring. Позволяет обеспечить целостность и согласованность данных при выполнении операций с базой данных.

### **Основные аспекты `@Transactional`**

### **1. Основные параметры:**
- **propagation:** Определяет поведение транзакции (например, `REQUIRED`, `REQUIRES_NEW` и т.д.).
- **isolation:** Определяет уровень изоляции (например, `DEFAULT`, `READ_COMMITTED`, `SERIALIZABLE` и т.д.).
- **timeout:** Указывает время ожидания выполнения транзакции.
- **readOnly:** Указывает, что транзакция будет только для чтения, что может оптимизировать производительность.
- **rollbackFor:** Указывает, какие исключения должны вызывать откат транзакции.

### **2. Пример использования:**
```java
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

@Service
public class UserService {

    private final UserRepository userRepository;

    public UserService(UserRepository userRepository) {
        this.userRepository = userRepository;
    }

    @Transactional
    public void createUser(User user) {
        userRepository.save(user);
        // Дополнительные операции, которые требуют транзакции
    }
}
```

### **3. Принципы работы:**
- **Проксирование:** Spring использует прокси для управления транзакциями. Это значит, что запросы, попадающие на методы с `@Transactional`, обрабатываются не напрямую, а через прокси.
- **Аспектно-ориентированное программирование:** Работает на основе аспектов, позволяя отделять управление транзакциями от бизнес-логики.

### **4. Когда использовать `@Transactional`:**
- При работе с несколькими репозиториями.
- Когда необходимо выполнить несколько операций, которые должны выполняться в рамках одной транзакции.
- Для обеспечения консистентности и целостности данных.

### **5. Уровни применения:**
- **На уровне методов:** Обычно применяется на уровне сервисного слоя.
- **На уровне классов:** Можно также применять к классам, что означает, что все методы класса будут участвовать в одной транзакции.

### **Выводы:**
Аннотация `@Transactional` является мощным инструментом для управления транзакциями в Spring и помогает упростить работу с базами данных, обеспечивая целостность и согласованность данных. Рекомендуется применять её на уровне сервиса для сложных операций, а для простых CRUD-операций можно использовать на уровне репозитория.