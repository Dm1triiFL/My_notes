---
tags:
  - "#ORM"
  - Term
---

> [!info]
> ### Дискриминатор (en. Различитель)
> 
> **Дискриминатор** — это концепция, используемая в объектно-реляционных отображениях, а также в ряде других областей, таких как машинное обучение и математика. В контексте программирования, особенно в областях, связанных с базами данных и объектно-ориентированным программированием, дискриминатор часто используется для определения наследования типов. 

#### В контексте ORM и JPA

В объектно-реляционных отображениях (ORM), таких как JPA (Java Persistence API), дискриминатор применяется для различения различных подтипов в иерархии классов. Это особенно полезно, когда у вас есть родительский класс и несколько его подклассов, которые нужно сохранить в одной таблице базы данных.

1. **Объектно-ориентированное наследование**:
   - Дискриминатор представляет собой колонку в таблице базы данных, которая используется для хранения информации о типе сущности (или класса), к которому принадлежит объект. Это позволяет ORM знать, какой подкласс создать при извлечении данных.

2. **Аннотация `@DiscriminatorColumn`**:
   - В JPA используется аннотация `@DiscriminatorColumn` для указания столбца дискриминатора. С помощью этой аннотации вы можете определить, как именно будет представлена информация о типе.

#### Пример использования дискриминатора

Вот пример, как использовать дискриминатор в JPA с аннотациями:

```java
import jakarta.persistence.*;

@Entity
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name = "vehicle_type", discriminatorType = DiscriminatorType.STRING)
public abstract class Vehicle {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    private String manufacturer;

    // Геттеры и сеттеры
}

@Entity
@DiscriminatorValue("CAR")
public class Car extends Vehicle {
    private int numberOfDoors;

    // Геттеры и сеттеры
}

@Entity
@DiscriminatorValue("TRUCK")
public class Truck extends Vehicle {
    private double payloadCapacity;

    // Геттеры и сеттеры
}
```

##### Объяснение примера:

1. **Родительский класс `Vehicle`**:
   - Определен как абстрактный класс с аннотацией `@Inheritance`, указывающей на использование стратегии `SINGLE_TABLE`, что означает, что все сущности будут храниться в одной таблице.

2. **Дискриминатор**:
   - Аннотация `@DiscriminatorColumn` указывает на столбец `vehicle_type`, который будет использоваться для хранения значения, определяющего тип автомобиля (например, "CAR" или "TRUCK").

3. **Подклассы**:
   - Классы `Car` и `Truck` имеют аннотацию `@DiscriminatorValue`, где указываются конкретные значения, которые будут записываться в столбец дискриминатора.

##### Пример таблицы

Таблица, созданная для хранения данных, может выглядеть так:

| id | manufacturer | vehicle_type | numberOfDoors | payloadCapacity |
|----|--------------|---------------|----------------|------------------|
| 1  | Toyota       | CAR           | 4              | NULL             |
| 2  | Ford         | TRUCK         | NULL           | 1200.5           |

### Заключение

Дискриминатор — это важный концепт в ORM, позволяющий организовать иерархию наследования и сохранять объекты разных классов в одной таблице, при этом обеспечивая возможность их правильной идентификации и восстановления при извлечении из базы данных. Это делает работу с наследованием более эффективной и упрощает процесс работы с базами данных.