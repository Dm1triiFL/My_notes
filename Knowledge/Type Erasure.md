---
tags:
  - Java
---
# Type Erasure в Java

**Type Erasure** — это механизм, используемый в языке Java для реализации обобщений (generics). Он позволяет компилятору уверенно работать с обобщениями, обеспечивая при этом обратную совместимость с версией Java до введения обобщений.

## Основные понятия

### 1. **Что такое Type Erasure?**
Type Erasure удаляет информацию о параметрах типа во время компиляции, заменяя их на их ограниченные типы или на `Object`, если ограничения не заданы. Это важно для сохранения совместимости с предыдущими версиями Java, которые не поддерживали обобщения.

### 2. **Как это работает?**
- При компиляции все параметризованные типы будут преобразованы в их границы.
- Для классов и методов, параметризованных типами, информация о типах будет потеряна, поэтому во время выполнения не будет доступной информации о параметризованном типе.

### 3. **Примеры работы с Type Erasure**

#### Пример 1: Удаление типов при компиляции
```java
public class Box<T> {
    private T item;

    public void setItem(T item) {
        this.item = item;
    }

    public T getItem() {
        return item;
    }
}
```
После компиляции этот класс будет примерно преобразован в:
```java
public class Box {
    private Object item;

    public void setItem(Object item) {
        this.item = item;
    }

    public Object getItem() {
        return item;
    }
}
```

#### Пример 2: Параметры типа и ограничения
```java
public class GenericMethod {
    public <T extends Number> void showValue(T value) {
        System.out.println(value);
    }
}
```
После компиляции метод будет выглядеть так:
```java
public void showValue(Number value) {
    System.out.println(value);
}
```

## Ограничения Type Erasure

- **Не поддерживает примитивные типы**: При использовании обобщений примитивные типы заменяются на их соответствующие обертки (например, `int` на `Integer`).
- **Не поддерживаются массивы параметризованных типов**: Вы не можете создавать массивы, которые имеют параметризованные типы.
- **Невозможность использования instanceof**: Невозможно проверить тип параметра обобщения при выполнении, так как информация о типе теряется.

## Заключение

Type Erasure является важной частью системы обобщений в Java, позволяя сохранить обратную совместимость и типобезопасность. Понимание этого механизма помогает разработчикам лучше использовать обобщения и избежать распространенных ошибок, связанных с потерей информации о типах.