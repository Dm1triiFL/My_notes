---
tags:
  - Java
---
# Метод `map` в Stream

## Что делает?

`map` — это **промежуточная операция** в Stream API, которая преобразует каждое значение потока, применяя к нему заданную функцию, и возвращает новый поток с преобразованными элементами.

---

## Подробно

```java
<R> Stream<R> map(Function<? super T, ? extends R> mapper)
```

- **Тип возвращаемого потока:** `Stream<R>` — поток нового типа.
- **Параметр `mapper`:** функция, которая принимает элемент типа `T` (исходного потока) и возвращает значение типа `R` (нового потока).

## Что происходит внутри?

- Для каждого элемента исходного потока вызывается функция `mapper`.
- Итоговый поток состоит из элементов, полученных в результате применения `mapper`.

---

## Пример использования

Допустим, есть список строк — названия городов:

```java
List<String> cities = Arrays.asList("Москва", "Санкт-Петербург", "Новосибирск");
```

Применим `map`, чтобы получить их длины:

```java
List<Integer> cityNameLengths = cities.stream()
                                    .map(String::length)
                                    .collect(Collectors.toList());
```

Результат: список длин названий городов.

---

## Важные моменты

- `map` — трансформация одного элемента в другой.
- Может использоваться для вытягивания свойств, подсчёта, преобразования типов и так далее.
- После `map` чаще идут terminal операции, такие как `collect`, `forEach` или `reduce`.

---

## Варианты использования

| Цель | Пример | Описание |
| --- | --- | --- |
| Извлечь свойство объекта | `stream.map(Widget::getColor)` | Получить поток цветов из объектов `Widget` |
| Преобразовать тип | `stream.map(String::length)` | Получить длины строк |
| Преобразовать данные | `stream.map(s -> s.toUpperCase())` | Сделать все строки заглавными |

---

