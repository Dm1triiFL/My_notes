---
tags:
  - Hibernate
---
**–ö–∞—Å–∫–∞–¥** (–æ—Ç –∞–Ω–≥–ª. *cascade*) –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –∏ ORM (Object-Relational Mapping), —Ç–∞–∫–∏—Ö –∫–∞–∫ Hibernate, –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –º–µ—Ö–∞–Ω–∏–∑–º—É, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ "–∫–∞—Å–∫–∞–¥–∏—Ä–æ–≤–∞—Ç—å" (–ø—Ä–∏–º–µ–Ω—è—Ç—å) –æ–ø–µ—Ä–∞—Ü–∏–∏, –≤—ã–ø–æ–ª–Ω—è–µ–º—ã–µ –Ω–∞–¥ –æ–¥–Ω–æ–π —Å—É—â–Ω–æ—Å—Ç—å—é, –Ω–∞ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –Ω–µ–π —Å—É—â–Ω–æ—Å—Ç–∏. –≠—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∞–Ω–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏ –∏ –∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

### –û—Å–Ω–æ–≤–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã –∫–∞—Å–∫–∞–¥–æ–≤

1. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π**:
   - –ö–∞—Å–∫–∞–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏, —Ç–∞–∫–∏–µ –∫–∞–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–ª–∏ —É–¥–∞–ª–µ–Ω–∏–µ, –Ω–µ —Ç–æ–ª—å–∫–æ –Ω–∞ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π —Å—É—â–Ω–æ—Å—Ç–∏, –Ω–æ –∏ –Ω–∞ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–æ—á–µ—Ä–Ω–∏—Ö —Å—É—â–Ω–æ—Å—Ç—è—Ö. –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –∏ —É–º–µ–Ω—å—à–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–≥–æ –∫–æ–¥–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–≤—è–∑—è–º–∏.

1. **–¢–∏–ø—ã –∫–∞—Å–∫–∞–¥–æ–≤**:
     - `PERSIST`: –ö–∞—Å–∫–∞–¥–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ.
     - `MERGE`: –ö–∞—Å–∫–∞–¥–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ.
     - `REMOVE`: –ö–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ.
     - `ALL`: –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏.
     - `DETACH`: –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –æ—Ç —Å–µ—Å—Å–∏–∏.
     - `REFRESH`: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è.

2. **–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:
   - –í–∑–∞–∏–º–æ—Å–≤—è–∑—å "–æ–¥–∏–Ω –∫–æ –º–Ω–æ–≥–∏–º" –º–µ–∂–¥—É —Å—É—â–Ω–æ—Å—Ç—è–º–∏ `Department` –∏ `Employee` –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞—Å–∫–∞–¥–∏—Ä–æ–≤–∞–Ω–∏–µ, —á—Ç–æ–±—ã –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ `Department` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–ª–∏—Å—å –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ `Employee`.

| **–¢–∏–ø –∫–∞—Å–∫–∞–¥–∞**              | **–û–ø–∏—Å–∞–Ω–∏–µ**                                                            | **–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**                    |
| ---------------------------- | ----------------------------------------------------------------------- | ------------------------------------------- |
| **üÜï `CascadeType.PERSIST`** | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–≤—è–∑–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ. | `@OneToMany(cascade = CascadeType.PERSIST)` |
| **üõ†Ô∏è `CascadeType.MERGE`**  | –û–±–Ω–æ–≤–ª—è–µ—Ç —Å–≤—è–∑–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ.               | `@OneToMany(cascade = CascadeType.MERGE)`   |
| **‚ùå `CascadeType.REMOVE`**   | –£–¥–∞–ª—è–µ—Ç —Å–≤—è–∑–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ.                   | `@OneToMany(cascade = CascadeType.REMOVE)`  |
| **üåê `CascadeType.ALL`**     | –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏: PERSIST, MERGE, REMOVE, REFRESH, DETACH.                  | `@OneToMany(cascade = CascadeType.ALL)`     |
| **üîå `CascadeType.DETACH`**  | –û—Ç–∫–ª—é—á–∞–µ—Ç —Å–≤—è–∑–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –æ—Ç —Å–µ—Å—Å–∏–∏.                                  | `@OneToMany(cascade = CascadeType.DETACH)`  |
| **üîÑ `CascadeType.REFRESH`** | –û–±–Ω–æ–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤.                 | `@OneToMany(cascade = CascadeType.REFRESH)` |

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–∞—Å–∫–∞–¥–∏—Ä–æ–≤–∞–Ω–∏—è

–í–æ—Ç –ø—Ä–∏–º–µ—Ä –∫–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–π –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–∞—Å–∫–∞–¥–∏—Ä–æ–≤–∞–Ω–∏—è:

```java
@Entity
public class Department {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    // –ù–∞–∑–≤–∞–Ω–∏–µ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞
    private String name;

    // –°–≤—è–∑—å —Å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏ —Å –∫–∞—Å–∫–∞–¥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
    @OneToMany(mappedBy = "department", cascade = CascadeType.ALL, orphanRemoval = true)
    private List<Employee> employees = new ArrayList<>();

    // –ì–µ—Ç—Ç–µ—Ä—ã –∏ —Å–µ—Ç—Ç–µ—Ä—ã
}

@Entity
public class Employee {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    // –ò–º—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
    private String name;

    // –°–≤—è–∑—å —Å –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–º
    @ManyToOne
    @JoinColumn(name = "department_id")
    private Department department;

    // –ì–µ—Ç—Ç–µ—Ä—ã –∏ —Å–µ—Ç—Ç–µ—Ä—ã
}
```

### –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–∞—Å–∫–∞–¥–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤ Hibernate –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–ø—Ä–æ—Å—Ç–∏—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤—è–∑—è–º–∏ –º–µ–∂–¥—É —Å—É—â–Ω–æ—Å—Ç—è–º–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –±–æ–ª–µ–µ —á–∏—Å—Ç–æ–º—É –∏ –ª–µ–≥–∫–æ—á–∏—Ç–∞–µ–º–æ–º—É –∫–æ–¥—É. –ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –Ω—É–∂–Ω—ã –ø—Ä–∏–º–µ—Ä—ã, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –¥–∞–π—Ç–µ –∑–Ω–∞—Ç—å! üåü