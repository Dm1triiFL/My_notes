---
tags:
  - Term
  - БазыДанных
---


> [!NOTE]
> ## Общее описание
> **Schema** (схема) в контексте баз данных — это организованное представление структуры базы данных, которое включает в себя определение таблиц, столбцов, типов данных, индексов и отношений между таблицами. Схема служит своего рода "черепицей" для базы данных, определяя, как данные будут организованы и связаны.

## Основные компоненты схемы
Схема базы данных может включать в себя следующие компоненты:

- **Таблицы**: Основные объекты для хранения данных.

| Таблица  | Описание                          |
| -------- | --------------------------------- |
| users    | Хранит информацию о пользователях |
| products | Хранит информацию о продуктах     |
| orders   | Хранит информацию о заказах       |


- **Столбцы**: Поля в таблицах, которые содержат данные. У каждого столбца есть имя и тип данных.

- **Типы данных**: Определяют, какие типы значений могут содержаться в столбцах (например, `INT`, `VARCHAR`, `DATE`).

- **Индексы**: Ускоривают процесс поиска данных.

- **Отношения**: Связи между таблицами (например, один-к-одному, один-ко-многим, многие-ко-многим).

## Типы схем
1. **Логическая схема**: Определяет структуру данных на абстрактном уровне, без указания на физическое представление.
   
2. **Физическая схема**: Информация о том, как данные фактически хранятся на диске, включая индексирование и другие показатели.

3. **Внешняя схема**: Определяет представление данных для пользователей и приложений, не затрагивая внутреннюю структуру базы данных.

## Пример создания схемы
Для создания схемы в SQL вы можете использовать команду `CREATE SCHEMA`. Например:

```sql
CREATE SCHEMA my_schema;
```

А затем создавать таблицы внутри этой схемы:

```sql
CREATE TABLE my_schema.users (
    user_id INT PRIMARY KEY,
    username VARCHAR(50),
    email VARCHAR(100)
);
```

# Пример использования схемы в базе данных

## Сценарий
Рассмотрим пример создания базы данных для управления интернет-магазином. Мы создадим схему, в которой будут определены таблицы для пользователей, продуктов и заказов. Это поможет организовать данные, облегчить их обработку и обеспечить целостность.

## Шаги

### 1. Создание схемы
Сначала мы создадим схему для нашего интернет-магазина. В SQL это можно сделать следующим образом:

```sql
CREATE SCHEMA online_store;
```

### 2. Создание таблицы пользователей
Создадим таблицу для хранения информации о пользователях:

```sql
CREATE TABLE online_store.users (
    user_id INT PRIMARY KEY AUTO_INCREMENT,
    username VARCHAR(50) NOT NULL UNIQUE,
    email VARCHAR(100) NOT NULL UNIQUE,
    password VARCHAR(255) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### 3. Создание таблицы продуктов
Теперь создадим таблицу для хранения информации о продуктах:

```sql
CREATE TABLE online_store.products (
    product_id INT PRIMARY KEY AUTO_INCREMENT,
    product_name VARCHAR(100) NOT NULL,
    price DECIMAL(10, 2) NOT NULL,
    stock INT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### 4. Создание таблицы заказов
Теперь создадим таблицу для хранения заказов, которая будет связана с таблицами пользователей и продуктов:

```sql
CREATE TABLE online_store.orders (
    order_id INT PRIMARY KEY AUTO_INCREMENT,
    user_id INT,
    product_id INT,
    order_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    quantity INT NOT NULL,
    FOREIGN KEY (user_id) REFERENCES online_store.users(user_id),
    FOREIGN KEY (product_id) REFERENCES online_store.products(product_id)
);
```

## Пример использования
### 5. Вставка данных в таблицы
Теперь давайте добавим некоторые данные в нашу базу данных.

#### Вставка пользователей
```sql
INSERT INTO online_store.users (username, email, password)
VALUES ('john_doe', 'john@example.com', 'securepassword');
```

#### Вставка продуктов
```sql
INSERT INTO online_store.products (product_name, price, stock)
VALUES ('Laptop', 999.99, 10);
```

#### Вставка заказа
```sql
INSERT INTO online_store.orders (user_id, product_id, quantity)
VALUES (1, 1, 1);
```

### 6. Запрос данных
Теперь можно выполнить запрос для получения информации о заказах:

```sql
SELECT o.order_id, u.username, p.product_name, o.quantity, o.order_date
FROM online_store.orders o
JOIN online_store.users u ON o.user_id = u.user_id
JOIN online_store.products p ON o.product_id = p.product_id;
```

## Заключение
В данном примере мы создали схему `online_store`, включающую три таблицы: `users`, `products` и `orders`. Мы продемонстрировали, как можно организовать данные, вставить их и выполнить запрос для получения сведений о заказах. Этот подход помогает поддерживать целостность и организованность данных, что очень важно для управления базами данных в реальных сценариях.